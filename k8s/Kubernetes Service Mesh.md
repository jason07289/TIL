# Service Mesh

## Service Mesh란?
- MSA에서 서비스간의 통신을 제어하고 관리할 수 있도록 하는 데에 특화된 인프라 계층
- 기존의 모놀리식에서의 호출방식은 직접 호출이라면 서비스 메시에서의 호출은 자체 인프라 계층의 Proxy를 통해 이뤄지게 된다.
- 개별 proxy는 서비스 내부가 아니라 각 서비스와 함께 실행되기에 sidecar 형식으로 올라온다.
- 이러한 sidecar들이 모여서 Mesh 네트워크를 형성한다.

## Service Mesh의 필요성
- 서비스 메시는 컨테이너 오케스트레이터 위에 별도의 계층으로 배포해 서비스 간 통신을 안전하고 빠르게 만드는 전용 인프라 계층이다.
- API 게이트웨이 같은 경우에는 외부의 트래픽을 받아들이고 내부적으로 배포하기 위해 설계되었다.(중앙 프록시를 통해 트래픽이 이동)
- 서비스 메시는 내부 트래픽을 관리하므로 API 게이트웨이와 서비스 메시를 적절히 섞어서 활용해야 한다.

## Service Mesh로 얻는 이점
- 서비스 간 안정적인 연동이 되므로 개발자들이 비즈니스에 집중 가능
- Jaeger를 통한 요청의 분산 추적은 서비스와 함께 가시적인 인프라 계층을 제공
- 서비스 메시는 장애가 발생한 서비스로부터 요청을 재 라우팅이 가능해 장애 복구 능력이 있음
- 성능 매트릭을 통해 런타임 환경에서 커뮤니케이션 최적화 방법을 찾을 수 있다.

## istio
- MSA의 분산 네트워크 환경 즉, k8s에서 각 app들의 네트워크 연결을 쉽게 설정할 수 있도록 지원하는 기술이며, 서비스에 대한 연결, 보안, 제어 및 모니터링이 가능
- 동적 서비스 발견, 로드 밸런싱, TLS 처리, HTTP/2 및 gRPC 프록싱, 서킷 브레이커, 헬스 체크, 백분율 기반 트래픽 분할을 통한 단계적 출시, 결함 주입 및 풍부한 메트릭 등의 Envoy 기능을 활용

## istio의 필요성
- gateway 및 proxy 대체 가능하다.
- 장애대응 및 트래픽제어를 정말 효율적으로 관리할 수 있음
